@inherits QuickWeatherComponentBase

<div class="weather-widget">
    <!-- Refresh Button -->
    <button class="refresh-button" @onclick="OnDemandUpdate" title="Refresh">
        ↺
    </button>

    <!-- Header Section -->
    <div class="row weather-header">
        <div class="col-4 current-weather-icon">
            <img src="@GetWeatherIconUrl(WeatherData?.Icon)" alt="@WeatherData?.Description" class="img-fluid" />
        </div>
        <div class="col-8 current-weather-details">
            <h2 class="current-temp">@Math.Round(WeatherData?.Temperature ?? 0)°</h2>
            <p class="current-condition">@(WeatherData?.Description ?? "Loading...")</p>
            <p class="feels-like">Feels like @Math.Round(WeatherData?.FeelsLike ?? 0)°</p>
            <p class="location">@WeatherData?.Location</p>
        </div>
    </div>

    @if (ForecastData != null)
    {
        <!-- Divider -->
        <hr />

        <!-- Forecast Section -->
        <div class="row forecast text-center">
            @foreach (var day in ForecastData)
            {
                <div class="col forecast-item">
                    <div class="forecast-day">@day.Date.ToString("ddd")</div>
                    <img src="@GetWeatherIconUrl(day.Icon)" alt="@day.Description" class="forecast-icon" />
                    <div class="forecast-temp">@Math.Round(day.MaxTemperature)° / @Math.Round(day.MinTemperature)°</div>
                    <div class="precipitation">
                        @(day.PrecipitationProbability)% <i class="fa fa-umbrella"></i>
                    </div>
                    <div class="wind">
                        @(Math.Round(day.WindSpeed))km/h <i class="fa fa-wind"></i>
                    </div>
                </div>
            }
        </div>
    }

    <!-- Divider -->
    <hr />

    <!-- Footer with Last Updated -->
    <div class="weather-footer text-end">
        <small>Last updated: @LastUpdated.ToString("HH:mm:ss") <br />Source: @Source</small>
    </div>
</div>
